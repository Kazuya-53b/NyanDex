
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swiper Example</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
</head>
<body>
<div class="cat-details">
  <h1><%= @cat.name %>のプロフィール</h1>

  <div id="cat-images" data-total-images="<%= @cat.images.size %>"></div>
  
  <!-- Main Swiper -->
  <div class="swiper-container main-swiper">
    <div class="swiper-wrapper">
      <% @cat.images.each do |image_url| %>
        <div class="swiper-slide">
          <img src="<%= image_url %>" class="main-image" style="width:100%; height:auto;">
        </div>
      <% end %>
    </div>

    <!-- Pagination & Navigation -->
    <div class="swiper-pagination"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  </div>

  <!-- Thumbnail Swiper -->
  <div class="swiper-container thumb-swiper" style="margin-top: 20px;">
    <div class="swiper-wrapper">
      <% @cat.images.each do |image_url| %>
        <div class="swiper-slide" style="cursor: pointer;">
          <img src="<%= image_url %>" class="thumbnail-image" style="width:100px; height:auto; border: 2px solid transparent;">
        </div>
      <% end %>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script>
document.addEventListener("turbo:load", function() {
  const mainSwiperContainer = document.querySelector('.main-swiper');
  const thumbSwiperContainer = document.querySelector('.thumb-swiper');

  const thumbSwiperOptions = {
    slidesPerView: 'auto',
    spaceBetween: 10,
    slideToClickedSlide: true,
    loop: false,
  };

  const thumbSwiper = new Swiper(thumbSwiperContainer, thumbSwiperOptions);

  const mainSwiperOptions = {
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    thumbs: {
      swiper: thumbSwiper,
    },
  };

  const mainSwiper = new Swiper(mainSwiperContainer, mainSwiperOptions);
});
</script>
</body>
</html>